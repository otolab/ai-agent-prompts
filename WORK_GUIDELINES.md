# 作業ガイドライン

## 基本作業フロー
- 目的の確認、動作モードを定めて切り替え・ドキュメント読み込み、状態の報告
- 関連ドキュメントを探して、必要なものを読み込む
- TodoListで進捗管理、完了タスクは即座に更新
- どのようなツールが使えるか把握

## 完了の判定
- **修正の完了** ≠ **作業の完了** ≠ **目的の達成**
- 目的に対する課題の解決がコミュニケーションの単位
- TodoListは作業の単位だが、ユーザにとっては目的の達成が重要
- 完了の条件例: 修正 + CI全テストのパス + レビュアーのapprove + 必要に応じてマージ完了

## コミュニケーション
- 不明なことはユーザに聞く
- 重要な技術的決定は理由とともに記録
- 控えめで自然な表現、過度な装飾を避ける
- コンテキストから明らかな事柄は省略、重要な情報にフォーカスする

## その他

### アシスタントがミスしがちなこと
- 相対パスの確認不足:
  - コマンド実行で**ファイルが存在しない**とき、**真っ先に疑うのはカレントディレクトリ**の問題であるべきです。**pwd**！
- cdと処理を混ぜない
  - x: Bash(cd xxx/xxx && 実行したい処理)
  - o: Bash(cd xxx/xxx && pwd) + Bash(実行したい処理)
- コストのある処理の結果の検証はファイルに保存して行う
  - x: call-api-cmd xxx | grep -E ...
  - o: call-api-cmd xxx > /tmp/... && cat /tmp/... | grep -E ...
- git add -A, git add .の禁止
  - 意図しない変更が入ることがあるので原則的に禁止
  - 仮に実行する場合はgit statusで状態を確認する

### ドキュメント方針
- **README.md**: ユーザフレンドリーで総合的、リポジトリの最初のページとしての性質
- **CLAUDE.md**: 目的志向のシンプルなインデックス、「claudeが読む」ことに特化
- CLAUDE.mdはREADME.mdを参照可能だが、基礎的なパッケージ情報は省略可能
- README.mdは人が読むことを前提とした包括的な内容

### 技術環境
- エディタ: `subl`コマンドでSublime Text起動。新Windowで開くのを基本とする
- ブラウザ: `Google Chrome`コマンドでGoogle Chrome起動。新Windowで開くのを基本とする
- Node.js: nvmで管理、Python: Homebrewでインストール
- GitHub: GitHub Cliを使う
  - アクセス制限のあるリポジトリでの作業が多いので、login済みのghを使います
  - PRレビューコメント取得: `gh api graphql`を使用する
    - 詳細なクエリ例: [github-cli-queries.md](recipes/github-cli-queries.md)
- **MCP (Model Context Protocol) 利用方針**:
  - Serena MCPが利用可能な場合は積極的に活用する
  - 利用可能なMCPツールは`mcp__`プレフィックスで識別

## レシピ集

プロジェクト開発で活用できる汎用的な指針・パターン集：
- **[recipes/](recipes/)** - 開発レシピ集のメインディレクトリ
  - testing/ - テスト戦略と分類定義
  - document-code-sync/ - ドキュメント同期管理
  - npm-workspaces-typescript/ - npm workspaces x TypeScript設定ガイド
  - その他のカテゴリは順次追加

---
**作成**: 2025年9月19日
**最終更新**: 2025年9月19日