# MCPツール 出力例

## mode_list

利用可能なモード一覧を表示します。

### 出力フォーマット

```
📋 利用可能な動作モード

• ドキュメント調査モード (document_research_mode)
  発動条件: 仕様理解が必要な時, 作業前調査, API仕様確認, 新規プロジェクト理解
• コード修正モード (tech_notes)
  発動条件: ファイル編集を伴う作業, 機能追加, バグ修正, リファクタリング
• オペレータモード (operator_system)
  発動条件: ユーザが挨拶をしたとき, オペレータ呼び出し指示時
• Issue追跡モード (issue_tracking_mode)
• プロダクト開発モード (product_development_mode)
```

## mode_enter

モードを開始し、モードの内容を表示します。

### 単一モード開始

```javascript
mode_enter({ modes: "document_research" })
```

出力:
```
【ドキュメント調査モード開始】

# ドキュメント調査モード

## 目的
プロジェクトの仕様や実装を深く理解するための調査モード

## 実行内容
- ドキュメントの体系的な読み込み
- コードベースの構造理解
- API仕様の確認
```

### 複数モード同時開始

```javascript
mode_enter({ modes: ["document_research", "tech_notes"] })
```

出力:
```
【ドキュメント調査モード開始】

# ドキュメント調査モード

## 目的
プロジェクトの仕様や実装を深く理解するための調査モード

────────────────────────────────────────

【コード修正モード開始】

# コード修正モード

## 目的
ファイル編集を伴う作業のためのモード
```

## mode_show

現在アクティブなモードの内容を表示します。

### 全アクティブモード表示

```javascript
mode_show({})
```

複数モードがアクティブな場合の出力:
```
【ドキュメント調査モード（現在アクティブ）】

# ドキュメント調査モード

## 目的
プロジェクトの仕様や実装を深く理解するための調査モード

────────────────────────────────────────

【コード修正モード（現在アクティブ）】

# コード修正モード

## 目的
ファイル編集を伴う作業のためのモード
```

### 特定モード表示

```javascript
mode_show({ mode: "document_research" })
```

出力:
```
【ドキュメント調査モード（現在アクティブ）】

# ドキュメント調査モード

## 目的
プロジェクトの仕様や実装を深く理解するための調査モード
```

## mode_status

現在のモード状態を表示します。

### 単一モードアクティブ時

```javascript
mode_status({})
```

出力:
```
📊 モード状態

アクティブなモード (1個):
  🟢 ドキュメント調査モード (document_research_mode)
```

### 複数モードアクティブ時

```javascript
mode_status({})
```

出力:
```
📊 モード状態

アクティブなモード (2個):
  🟢 ドキュメント調査モード (document_research_mode)
  🟢 コード修正モード (tech_notes)
```

### モード未設定時

```javascript
mode_status({})
```

出力:
```
📊 モード状態

現在のモード: なし
状態: ⭕ 待機中
```

## mode_exit

モードを終了します。

### 全モード終了

```javascript
mode_exit({})
```

複数モードがアクティブな場合の出力:
```
【ドキュメント調査モード終了】

調査結果に基づいて次の作業を進めてください。
必要に応じて追加調査を検討してください。

────────────────────────────────────────

【コード修正モード終了】

コード修正モードを終了しました。
```

### 特定モード終了

```javascript
mode_exit({ modes: "document_research" })
```

出力:
```
【ドキュメント調査モード終了】

調査結果に基づいて次の作業を進めてください。
必要に応じて追加調査を検討してください。
```

### 複数モード同時終了

```javascript
mode_exit({ modes: ["document_research", "tech_notes"] })
```

出力:
```
【ドキュメント調査モード終了】

調査結果に基づいて次の作業を進めてください。
必要に応じて追加調査を検討してください。

────────────────────────────────────────

【コード修正モード終了】

コード修正モードを終了しました。
```

## エラーケース

### mode_enter で存在しないモードを指定

```javascript
mode_enter({ modes: "non_existent" })
```

出力:
```
モード 'non_existent' が見つかりません。利用可能なモード: document_research_mode, tech_notes, operator_system, ...
```

### mode_enter で複数モードの一部が存在しない

```javascript
mode_enter({ modes: ["document_research", "non_existent", "tech_notes"] })
```

出力:
```
【ドキュメント調査モード開始】

# ドキュメント調査モード
...

────────────────────────────────────────

⚠️ モード 'non_existent' が見つかりません

────────────────────────────────────────

【コード修正モード開始】

# コード修正モード
...
```

### mode_exit で非アクティブなモードを指定

```javascript
mode_exit({ modes: "non_active" })
```

出力:
```
モード 'non_active' は現在アクティブではありません。
```

## 使用シナリオ例

### シナリオ1: 調査と実装の並行作業

```javascript
// 1. 調査モードとコード修正モードを同時に開始
mode_enter({ modes: ["document_research", "tech_notes"] })

// 2. 現在の状態を確認
mode_status()
// → アクティブなモード (2個)

// 3. 調査が完了したら調査モードだけ終了
mode_exit({ modes: "document_research" })

// 4. コード修正を継続
// ...

// 5. 作業完了時に残りのモードを終了
mode_exit()
```

### シナリオ2: モードの段階的追加

```javascript
// 1. まず調査モードで開始
mode_enter({ modes: "document_research" })

// 2. 調査中にコード修正が必要になったら追加
mode_enter({ modes: "tech_notes" })

// 3. 両方のモードがアクティブな状態で作業
mode_status()
// → アクティブなモード (2個)

// 4. 必要に応じて特定のモード内容を確認
mode_show({ mode: "tech_notes" })

// 5. 全作業完了時に一括終了
mode_exit()
```

## 実装詳細

### YAMLメタデータによる表示の違い

| フィールド | 影響する表示 |
|----------|------------|
| displayName | モード名の表示に使用 |
| autoTrigger | mode_listで発動条件として表示 |
| exitMessage | mode_exitで終了メッセージとして表示 |

### ファイル名とモード名の関係

- ファイル名: `DOCUMENT_RESEARCH_MODE.md`
- モード名（内部）: `document_research_mode`（小文字化）
- 表示名: YAMLの`displayName`または`document_research_mode`

### 複数モード時の区切り線

複数のモードを同時に表示する際は、40文字の区切り線（`─`）で区切られます。