---
mode: closing
displayName: クロージングモード
exitMessage: |
  クロージングモードを終了しました。
---

# クロージングモード

作業セッション終了時の整理・振り返り・引き継ぎを体系的に行うモードです。

## 起動条件

- **ユーザの明示的な作業完了宣言のみ**
- 自動判断による起動は行わない
- 「作業を終了します」「クロージングをお願いします」などの明示的な指示

## 作業フロー

### 1. 状況確認・クリーンアップ

**生成物の確認**
- セッション中に生成したファイル・メモ・一時ファイルの一覧化
- 各ファイルの保存・削除の要不要を確認
- 不要な一時ファイルやテストデータの削除

**Gitの状態確認**
```bash
git status
git log -3 --oneline
git branch -vv
```
- 未コミットの変更がないか確認
- 未プッシュのコミットがないか確認
- 作業ブランチの状態確認
- 必要に応じてコミット・プッシュの実行

**環境のクリーンアップ**
- ビルド成果物の確認
- node_modules や一時ディレクトリの状態確認
- 開発サーバーやプロセスの停止確認

### 2. 作業記録・引き継ぎ

以下を適切なファイルに簡潔に記述する。

**作業完了の記録**
- 本セッションで達成したこと
- 対応したIssue番号とその状態
- 作成・更新したドキュメント
- 実装した機能や修正したバグ

**残作業・次回への引き継ぎ**
- 未完了のTODO項目の整理
- 次回セッションで対応すべき事項
- 継続中の作業の現在地
- 注意事項や検討が必要な課題

**Issue・ロードマップの更新**
- 対応完了したIssueのクローズ
- 新たに発見した課題のIssue化
- プロジェクトロードマップの進捗更新
- マイルストーンの見直し

### 3. ドキュメント更新

**ADR（アーキテクチャ決定記録）**
- セッション中に行った設計判断の記録
- 採用した技術や手法の選択理由
- 今後の実装・リファクタリングの手がかり
- 型定義や仕様の決定事項

**関連ドキュメントの更新**
- README.mdやCLAUDE.mdの更新（機能追加・変更があった場合）
- changeset, CHANGELOG.mdの更新
- API仕様書やインターフェース定義の更新
- 開発ドキュメントの追記

### 4. 作業プロセス改善

**セッションの振り返り**
- うまくいった点、改善できる点
- 時間がかかった作業とその原因
- ツールや手法の効果的な使用法
- コミュニケーションの質

**次回セッションへの提案**
- 作業環境の改善案
- 導入を検討すべきツールやライブラリ
- ワークフローの最適化案

**プロンプト・設定の改善**
- プロンプトやガイドラインの改善が必要な場合、ユーザーが明示的に要求すれば振り返りモードに遷移
- クロージングモード → 振り返りモードが正規ルート（ユーザーの要求時のみ）

## 出力フォーマット

### クロージングレポート

以下の形式でセッションのまとめを作成します：

```markdown
# セッションクロージングレポート

**日時**: YYYY-MM-DD HH:MM
**作業時間**: 約X時間

## 完了した作業

- [ ] Issue #XXX: 機能Aの実装
- [ ] Issue #XXX: バグBの修正
- [ ] ドキュメント更新: README.md, CHANGELOG.md

## 生成物

### 保存
- `path/to/file.ts` - 新機能の実装
- `docs/adr/YYYYMMDD-decision-title.md` - ADR

### 削除済み
- `tmp/work-memo.md` - 一時メモ

## Git状態

- コミット: X件
- プッシュ: 完了 / 未実施
- ブランチ: `feature/xxx` (clean / uncommitted changes)

## 次回への引き継ぎ

### 継続作業
1. XXXの実装を続ける（現在YYY%完了）
2. ZZZのテストを追加

### 注意事項
- AAAの設定に依存関係あり
- BBBは次回までに確認が必要

## 改善提案

- XXXツールの導入を検討
- YYYワークフローの効率化

---
次回セッション開始時に本レポートを確認してください。
```

## 注意事項

- **ユーザ確認を優先**: 削除や変更は必ずユーザに確認
- **網羅的に確認**: 見落としを防ぐため、各項目を体系的にチェック
- **簡潔に記録**: 次回セッションで読みやすい形式で記録
- **改善志向**: 単なる記録でなく、次回への改善提案を含める

## モード終了時

- セッション全体の振り返りと感謝の言葉
- 次回セッションへのスムーズな引き継ぎの確認
- 未解決事項や継続課題の明確化
